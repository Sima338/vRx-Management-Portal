<vrx-page-container title="Users" subtitle="Manage user accounts and permissions">
  <div class="users-content">
    
    <!-- Actions Bar -->
    <div class="actions-bar">
      <vrx-button 
        variant="primary" 
        (clicked)="showAddUserForm()">
        Add User
      </vrx-button>
    </div>

    <!-- Add User Form -->
    <div class="add-user-form" *ngIf="showForm()">
      <h3>Add New User</h3>
      <div class="form-grid">
        <div class="form-group">
          <label for="userName">Name</label>
          <input 
            type="text" 
            id="userName"
            class="form-input"
            [value]="newUser().name || ''"
            (input)="updateNewUser('name', $event)"
            placeholder="Enter user name">
        </div>
        <div class="form-group">
          <label for="userEmail">Email</label>
          <input 
            type="email" 
            id="userEmail"
            class="form-input"
            [value]="newUser().email || ''"
            (input)="updateNewUser('email', $event)"
            placeholder="Enter email">
        </div>
        <div class="form-group">
          <label for="userRole">Role</label>
          <select 
            id="userRole"
            class="form-select"
            [value]="newUser().role || ''"
            (change)="updateNewUser('role', $event)">
            <option value="">Select role</option>
            <option value="Admin">Admin</option>
            <option value="Editor">Editor</option>
            <option value="Viewer">Viewer</option>
          </select>
        </div>
      </div>
      <div class="form-actions">
        <!-- Error Messages -->
        <div *ngIf="errors().length > 0" class="error-messages">
          <div *ngFor="let error of errors()" class="error-message">
            {{ error }}
          </div>
        </div>
        
        <vrx-button variant="secondary" (clicked)="cancelAdd()">Cancel</vrx-button>
        <vrx-button 
          variant="primary" 
          [loading]="loading()"
          (clicked)="addUser()">
          Add User
        </vrx-button>
      </div>
    </div>

    <!-- Users Table -->
    <div class="table-section">
      <div *ngIf="loading()" class="loading-state">
        <div class="loading-spinner"></div>
        <span>Loading users...</span>
      </div>
      
      <vrx-table 
        *ngIf="!loading()"
        [columns]="tableColumns"
        [data]="users()"
        [actions]="tableActions"
        [showSearch]="true"
        searchPlaceholder="Search"
        [searchColumns]="['name', 'email', 'role']"
        (actionClicked)="handleTableAction($event)">
      </vrx-table>
    </div>

    <!-- Users Stats -->
    <div class="users-stats">
      <div class="stat-card">
        <div class="stat-number">{{ stats().total }}</div>
        <div class="stat-label">Total Users</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{ stats().active }}</div>
        <div class="stat-label">Active Users</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{ stats().admins }}</div>
        <div class="stat-label">Administrators</div>
      </div>
    </div>

  </div>
</vrx-page-container>
