<vrx-page-container 
  title="Asset Management" 
  subtitle="Monitor and manage your digital assets and infrastructure">
  
  <div class="assets-content">
    
    <!-- Error Display -->
    <div *ngIf="error()" class="error-message">
      <span>{{ error() }}</span>
      <button class="retry-btn" (click)="loadAssets()">Retry</button>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card total">
        <div class="stat-number">{{ stats().total }}</div>
        <div class="stat-label">Total Assets</div>
      </div>
      <div class="stat-card active">
        <div class="stat-number">{{ stats().active }}</div>
        <div class="stat-label">Active</div>
      </div>
      <div class="stat-card high-risk">
        <div class="stat-number">{{ stats().highRisk }}</div>
        <div class="stat-label">High Risk</div>
      </div>
      <div class="stat-card critical">
        <div class="stat-number">{{ stats().criticalVulnerabilities }}</div>
        <div class="stat-label">Critical Vulnerabilities</div>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters-section">
      <div class="filter-group">
        <label for="typeFilter">Asset Type:</label>
        <select id="typeFilter" [(ngModel)]="selectedType" (ngModelChange)="onFilterChange()" class="filter-select">
          <option value="all">All Types</option>
          <option value="server">Server</option>
          <option value="application">Application</option>
          <option value="database">Database</option>
          <option value="network">Network</option>
          <option value="cloud">Cloud</option>
        </select>
      </div>

      <div class="filter-group">
        <label for="statusFilter">Status:</label>
        <select id="statusFilter" [(ngModel)]="selectedStatus" (ngModelChange)="onFilterChange()" class="filter-select">
          <option value="all">All Statuses</option>
          <option value="active">Active</option>
          <option value="inactive">Inactive</option>
          <option value="maintenance">Maintenance</option>
        </select>
      </div>

      <div class="filter-group">
        <label for="environmentFilter">Environment:</label>
        <select id="environmentFilter" [(ngModel)]="selectedEnvironment" (ngModelChange)="onFilterChange()" class="filter-select">
          <option value="all">All Environments</option>
          <option value="production">Production</option>
          <option value="staging">Staging</option>
          <option value="development">Development</option>
        </select>
      </div>

      <div class="filter-group">
        <label for="riskFilter">Risk Level:</label>
        <select id="riskFilter" [(ngModel)]="selectedRiskLevel" (ngModelChange)="onFilterChange()" class="filter-select">
          <option value="all">All Risk Levels</option>
          <option value="critical">Critical (9+)</option>
          <option value="high">High (7-8.9)</option>
          <option value="medium">Medium (4-6.9)</option>
          <option value="low">Low (<4)</option>
        </select>
      </div>

      <div class="filter-actions">
        <vrx-button 
          variant="secondary" 
          (clicked)="clearFilters()">
          Clear Filters
        </vrx-button>
      </div>
    </div>

    <!-- Assets Table -->
    <div class="table-section">
      <div *ngIf="loading()" class="loading-state">
        <div class="loading-spinner"></div>
        <span>Loading assets...</span>
      </div>
      
      <vrx-table 
        *ngIf="!loading()"
        [columns]="tableColumns"
        [data]="filteredAssets()"
        [actions]="tableActions"
        [showSearch]="true"
        [searchPlaceholder]="'Search'"
        [searchColumns]="['name', 'owner', 'type', 'environment']"
        (actionClicked)="handleTableAction($event)"
        (rowClicked)="handleRowClick($event)">
      </vrx-table>
    </div>

  </div>
</vrx-page-container>
